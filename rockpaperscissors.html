<!DOCTYPE html>
<html>
    <head>
        <title>Rock, Paper, Scissors</title>
    </head>
    <body>
        <script>
            const rounds = 5;
            const winnerDict = {
                'rock': 'paper',
                'paper': 'scissors',
                'scissors': 'rock'
            }

            function computerPlay() {
                var gestures = Object.keys(winnerDict);
                var random = Math.floor(Math.random() * gestures.length);
                return gestures[random];
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection = playerSelection.toLowerCase();
                computerSelection = computerSelection.toLowerCase();

                if (playerSelection == computerSelection) {
                    return 'tie';
                } else if (playerSelection == winnerDict[computerSelection]) {
                    return 'player';
                } else {
                    return 'computer';
                }

            }

            function reportWinner(winner) {
                if (winner == 'player') {
                    playerScore++;
                    console.log('You win, ' + playerSelection + ' beats ' + computerSelection);
                } else if (winner == 'computer') {
                    computerScore++;
                    console.log('You lose, ' + computerSelection + ' beats ' + playerSelection);
                } else {
                    console.log('Tie! You both chose ' + playerSelection)
                } 
                    console.log('Player: ' + playerScore + '. Computer: ' + computerScore + '.')
            }

            function game() {
                var playerScore = 0;
                var computerScore = 0;
                for (i = 1; i <= rounds; i++) {
                    var computerSelection = computerPlay();
                    var playerSelection;
                    do {
                        playerSelection = prompt('Rock, paper, or scissors?')
                    } while (!playerSelection)
                    winner = playRound(playerSelection, computerSelection);
                    reportWinner(winner);
                }
            }

            game();
        </script>
    </body>
</html>